<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Halaman Admin Lazismu</title>
    <style>
        body { font-family: sans-serif; background: #f4f4f4; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .kotak { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); width: 300px; text-align: center; }
        input { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box;}
        button { width: 100%; padding: 10px; background: #F15A22; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;}
        button:hover { background: #d1491e; }
        .hidden { display: none; }
        #pesan-error { color: red; font-size: 12px; margin-bottom: 10px; }
    </style>
</head>
<body>

    <div id="login-screen" class="kotak">
        <h2>üîê Login Admin</h2>
        <p>Masukkan kunci rahasia</p>
        <input type="email" id="email" placeholder="Email Admin">
        <input type="password" id="password" placeholder="Password">
        <div id="pesan-error"></div>
        <button onclick="prosesLogin()">Masuk</button>
    </div>

    <div id="admin-dashboard" class="kotak hidden">
        <h2>üëã Selamat Datang, Admin!</h2>
        <p>Anda berhasil masuk ke area rahasia.</p>
        <hr>
        <p>Di sini nanti kita taruh tombol verifikasi donasi.</p>
        <br>
        <button onclick="prosesLogout()" style="background: #333;">Keluar (Logout)</button>
    </div>

    <script type="module">
      // Import alat-alat satpam dari internet
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
      import { getAuth, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

      // --- DISINI TEMPEL KODE RAHASIA (CONFIG) ANDA NANTI ---
      const firebaseConfig = {
        apiKey: "AIzaSyAWPIcS8h3kE6kJYBxjeVFdSprgrMzOFo8",
        authDomain: "lazismu-auth.firebaseapp.com",
        projectId: "lazismu-auth",
        storageBucket: "lazismu-auth.firebasestorage.app",
        messagingSenderId: "398570239500",
        appId: "1:398570239500:web:0b3e96109a4bf304ebe029"
      };

      // Menyalakan Satpam
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);

      // --- LOGIKA SATPAM (Script Otak) ---

      // 1. Fungsi Cek Pintu (Apakah Login Berhasil?)
      window.prosesLogin = function() {
          const email = document.getElementById('email').value;
          const pass = document.getElementById('password').value;
          const errorMsg = document.getElementById('pesan-error');

          // Perintah ke Satpam: "Coba cek email & password ini"
          signInWithEmailAndPassword(auth, email, pass)
            .then((userCredential) => {
                // Kalo cocok, diam saja. Nanti 'Pengamat' di bawah yang bekerja.
                errorMsg.innerText = ""; 
            })
            .catch((error) => {
                // Kalo salah
                errorMsg.innerText = "Email atau Password Salah!";
                console.error(error);
            });
      }

      // 2. Fungsi Keluar
      window.prosesLogout = function() {
          signOut(auth);
      }

      // 3. Si Pengamat (Yang standby 24 jam)
      // Satpam ini selalu ngecek: "Eh, status orang ini lagi Login atau Logout?"
      onAuthStateChanged(auth, (user) => {
          const loginScreen = document.getElementById('login-screen');
          const dashboard = document.getElementById('admin-dashboard');

          if (user) {
              // Kalo user ADA (sedang login)
              loginScreen.classList.add('hidden');   // Sembunyikan form login
              dashboard.classList.remove('hidden');  // Tampilkan dashboard
          } else {
              // Kalo user TIDAK ADA (belum login/sudah logout)
              loginScreen.classList.remove('hidden'); // Tampilkan form login
              dashboard.classList.add('hidden');      // Sembunyikan dashboard
          }
      });
    </script>
</body>
</html>
